import{k as C,l as h,at as y,al as D,I as S,au as N,a as I,_ as U,r as t,o as c,c as A,b as l,w as o,A as p,e as b,F as k,z,B as P,Y as j,d as B}from"./index-858ac1df.js";import{m as V}from"./message-dfea8e68.js";const E={name:"PermissionPage",setup(){var r;const _=C(()=>({width:"77vw",justifyContent:"start"})),n=h((r=y())==null?void 0:r.username),f=[{value:"admin",label:"添加根管理员"},{value:"common",label:"添加普通管理员"}];function e(){y().loginByUsername({username:n.value,password:"admin123"}).then(d=>{d.success&&(D().removeItem("async-routes"),S().clearAllCachePage(),N())})}const m=h({adminID:"",id:"",password:"",phoNum:"",userName:""});function g(){const d=JSON.stringify(m.value);I({method:"post",url:"/test/api/sign_up_admin",headers:{"User-Agent":"Apifox/1.0.0 (https://apifox.com)","Content-Type":"application/json"},data:d}).then(function(u){u.data.code==200?V("添加管理员成功",{type:"success"}):V("添加管理员失败:"+u.data.message,{type:"error"})}).catch(function(u){})}return{elStyle:_,username:n,options:f,onChange:e,newAdmin:m,onSubmit:g}}};const H={class:"table-container"},T=B("div",{class:"card-header"},[B("span",null,"添加管理员用户")],-1);function J(_,n,f,e,m,g){const r=t("el-tag"),d=t("el-option"),w=t("el-select"),u=t("el-card"),i=t("el-input"),s=t("el-form-item"),v=t("el-button"),F=t("el-form"),x=t("el-space");return c(),A("div",H,[l(x,{direction:"vertical",size:"large"},{default:o(()=>[l(r,{style:p(e.elStyle),size:"large",effect:"dark",type:"danger"},{default:o(()=>[b(" 请谨慎添加管理员用户 ")]),_:1},8,["style"]),l(u,{shadow:"never",style:p(e.elStyle)},{header:o(()=>[T]),default:o(()=>[l(w,{modelValue:e.username,"onUpdate:modelValue":n[0]||(n[0]=a=>e.username=a),onChange:e.onChange},{default:o(()=>[(c(!0),A(k,null,z(e.options,a=>(c(),P(d,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1},8,["style"]),l(u,{shadow:"never",style:p(e.elStyle)},{default:o(()=>[l(F,{onSubmit:j(e.onSubmit,["prevent"]),"label-width":"100px",align:"right"},{default:o(()=>[l(s,{label:"管理员ID"},{default:o(()=>[l(i,{modelValue:e.newAdmin.adminID,"onUpdate:modelValue":n[1]||(n[1]=a=>e.newAdmin.adminID=a),placeholder:"请输入管理员ID"},null,8,["modelValue"])]),_:1}),l(s,{label:"ID","label-width":"100px",align:"right"},{default:o(()=>[l(i,{modelValue:e.newAdmin.id,"onUpdate:modelValue":n[2]||(n[2]=a=>e.newAdmin.id=a),placeholder:"请输入ID"},null,8,["modelValue"])]),_:1}),l(s,{label:"密码","label-width":"100px",align:"right"},{default:o(()=>[l(i,{modelValue:e.newAdmin.password,"onUpdate:modelValue":n[3]||(n[3]=a=>e.newAdmin.password=a),placeholder:"请输入密码",type:"password"},null,8,["modelValue"])]),_:1}),l(s,{label:"手机号码","label-width":"100px",align:"right"},{default:o(()=>[l(i,{modelValue:e.newAdmin.phoNum,"onUpdate:modelValue":n[4]||(n[4]=a=>e.newAdmin.phoNum=a),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1}),l(s,{label:"用户名","label-width":"100px",align:"right"},{default:o(()=>[l(i,{modelValue:e.newAdmin.userName,"onUpdate:modelValue":n[5]||(n[5]=a=>e.newAdmin.userName=a),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),l(s,null,{default:o(()=>[l(v,{type:"primary","native-type":"submit"},{default:o(()=>[b("添加管理员")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["style"])]),_:1})])}const O=U(E,[["render",J]]);export{O as default};
